<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>PinchPoint – Layout B: Compact Status Bar</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet" />
<script>
tailwind.config = {
  theme: {
    extend: {
      fontFamily: {
        sans: ['Instrument Sans', 'system-ui', 'sans-serif'],
        mono: ['Space Mono', 'monospace'],
      },
    },
  },
}
</script>
<style>
  body { font-family: 'Instrument Sans', system-ui, sans-serif; }
  .tabular { font-variant-numeric: tabular-nums; }
</style>
</head>
<body class="bg-[#fafaf9] min-h-screen antialiased">

<!-- Nav -->
<nav class="flex items-center justify-between max-w-[680px] mx-auto px-6 py-6">
  <span class="text-base font-semibold tracking-tight text-stone-900">PinchPoint</span>
  <div class="w-8 h-8 rounded-full bg-stone-200"></div>
</nav>

<main class="max-w-[680px] mx-auto px-6 pb-16 space-y-4">

  <!-- HERO: Timer + Status + Actions — all one row -->
  <div class="bg-white rounded-2xl border border-stone-200/80 shadow-sm p-5">
    <div class="flex items-center gap-5">

      <!-- Timer — dominant left element -->
      <div class="flex-shrink-0">
        <p class="text-[10px] font-semibold text-stone-400 uppercase tracking-widest mb-0.5">Resets in</p>
        <p class="text-2xl font-bold text-emerald-600 tabular font-mono leading-none">4h 05m 49s</p>
        <p class="text-[10px] text-stone-400 mt-0.5">at 11:00 PM</p>
      </div>

      <!-- Divider -->
      <div class="w-px h-12 bg-stone-200/80 flex-shrink-0"></div>

      <!-- Status chips — compact horizontal -->
      <div class="flex-1 flex flex-wrap gap-x-4 gap-y-1 text-xs">
        <div class="flex items-center gap-1.5">
          <span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span>
          <span class="text-stone-500">Active</span>
        </div>
        <div class="flex items-center gap-1.5">
          <span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span>
          <span class="text-stone-500">Healthy</span>
        </div>
        <div class="text-stone-400">
          Last <span class="text-stone-600 font-medium">6:11 PM</span> <span class="text-stone-300">(42m)</span>
        </div>
        <div class="text-stone-400">
          Next <span class="text-stone-600 font-medium">Fri 8 PM</span>
        </div>
      </div>

      <!-- Actions — right-aligned, stacked compact -->
      <div class="flex flex-col gap-1.5 flex-shrink-0">
        <button class="px-4 py-1.5 rounded-lg text-xs font-semibold bg-stone-900 text-white hover:bg-stone-800 transition-colors cursor-pointer">
          Pinch me
        </button>
        <button class="px-4 py-1.5 rounded-lg text-xs font-medium text-amber-700 bg-amber-50 border border-amber-200/60 hover:bg-amber-100 transition-colors cursor-pointer">
          Pause
        </button>
      </div>
    </div>
  </div>

  <!-- SCHEDULE CARD -->
  <div class="bg-white rounded-2xl border border-stone-200/80 shadow-sm overflow-hidden">

    <!-- Schedule header bar -->
    <div class="px-5 py-3.5 flex items-center justify-between border-b border-stone-100">
      <div class="flex items-center gap-4">
        <h2 class="text-xs font-bold text-stone-800 uppercase tracking-wider">Schedule</h2>
        <!-- Legend inline -->
        <div class="flex items-center gap-3">
          <div class="flex items-center gap-1">
            <div class="w-2 h-2 rounded-sm bg-emerald-500"></div>
            <span class="text-[10px] text-stone-400">ping</span>
          </div>
          <div class="flex items-center gap-1">
            <div class="w-2 h-2 rounded-sm bg-emerald-100"></div>
            <span class="text-[10px] text-stone-400">window</span>
          </div>
          <div class="flex items-center gap-1">
            <div class="w-2 h-2 rounded-sm bg-stone-100 border border-stone-200/60"></div>
            <span class="text-[10px] text-stone-400">idle</span>
          </div>
        </div>
      </div>
      <div class="flex items-center gap-1.5">
        <span class="text-[11px] text-stone-500 border border-stone-200 rounded-md px-2 py-0.5 bg-stone-50">Sydney (UTC+11)</span>
        <button class="text-[10px] text-stone-400 hover:text-stone-600 border border-stone-200 rounded-md px-1.5 py-0.5 cursor-pointer">Detect</button>
      </div>
    </div>

    <!-- Heatmap -->
    <div class="px-5 py-4" id="heatmap-b"></div>

    <!-- Save row — merged into card bottom -->
    <div class="px-5 py-3 border-t border-stone-100 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <button class="px-4 py-1.5 bg-stone-900 text-white rounded-lg text-xs font-semibold hover:bg-stone-800 transition-colors cursor-pointer">
          Save schedule
        </button>
        <button class="px-3 py-1.5 text-stone-400 hover:text-stone-600 text-xs transition-colors cursor-pointer">
          Reset
        </button>
      </div>
      <!-- Danger actions tucked into footer right -->
      <div class="flex items-center gap-3 text-[11px]">
        <button class="text-stone-400 hover:text-amber-600 transition-colors cursor-pointer">Disconnect</button>
        <button class="text-stone-400 hover:text-red-500 transition-colors cursor-pointer">Delete account</button>
      </div>
    </div>
  </div>

</main>

<script>
function buildHeatmapSafe(containerId) {
  const container = document.getElementById(containerId);
  const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
  const hourLabels = { 0: '12a', 3: '3a', 6: '6a', 9: '9a', 12: '12p', 15: '3p', 18: '6p', 21: '9p' };
  const pings = {
    0: [5, 10, 15, 20], 1: [5, 10, 15, 20], 2: [5, 10, 15, 20], 3: [5, 10, 15, 20],
    4: [7, 12, 17, 22], 5: [9, 14, 19], 6: [9, 14, 19],
  };
  const colors = { ping: '#10b981', window: '#d1fae5', idle: '#f5f5f4' };
  const hours = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,0];

  function cellType(day, hour) {
    const dayPings = pings[day] || [];
    for (const p of dayPings) {
      if (hour === p) return 'ping';
      if (hour > p && hour < p + 5) return 'window';
    }
    return 'idle';
  }

  // Header row
  const header = document.createElement('div');
  header.style.cssText = 'display:grid;grid-template-columns:30px repeat(7,1fr);gap:2px;margin-bottom:4px';
  header.appendChild(document.createElement('div'));
  for (const d of days) {
    const cell = document.createElement('div');
    cell.textContent = d;
    cell.style.cssText = 'text-align:center;font-size:10px;font-weight:600;color:#78716c;padding:2px 0';
    header.appendChild(cell);
  }
  container.appendChild(header);

  // Hour rows
  for (const hour of hours) {
    const row = document.createElement('div');
    row.style.cssText = 'display:grid;grid-template-columns:30px repeat(7,1fr);gap:2px;margin-bottom:1.5px';

    const labelCell = document.createElement('div');
    if (hourLabels[hour] !== undefined) {
      labelCell.style.cssText = 'display:flex;align-items:flex-start;justify-content:flex-end;padding-right:4px';
      const span = document.createElement('span');
      span.textContent = hourLabels[hour];
      span.style.cssText = "font-size:8px;color:#a8a29e;line-height:1;position:relative;top:-3px;font-family:'Space Mono',monospace";
      labelCell.appendChild(span);
    }
    row.appendChild(labelCell);

    for (let d = 0; d < 7; d++) {
      const type = cellType(d, hour);
      const cell = document.createElement('div');
      cell.style.cssText = 'height:13px;border-radius:2px;background:' + colors[type] + ';cursor:pointer;transition:opacity 0.1s';
      cell.addEventListener('mouseenter', function() { this.style.opacity = '0.7'; });
      cell.addEventListener('mouseleave', function() { this.style.opacity = '1'; });
      row.appendChild(cell);
    }
    container.appendChild(row);
  }
}

buildHeatmapSafe('heatmap-b');
</script>

</body>
</html>
